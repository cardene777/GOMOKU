# GMKRouter

上記のコントラクトは「GMKRouter」という名前のスマートコントラクトで、主にDEX（分散型取引所）との相互作用を行うためのルーティング機能を提供します。以下では、コントラクトの主な機能や重要な部分について説明します。

**1. インポート:**
このコントラクトは以下のインターフェースとエラーを使用しています。
- `Ownable`: オーナーシップの管理を提供するOpenZeppelinのコントラクト。
- `IGMKRouter`: GMKRouterとの相互作用に必要な関数が定義されたインターフェース。

**2. ステート変数:**
- `mapping(address => address[]) private _depositoriesForAsset;`: トークンアドレスをデポジトリのアドレス配列にマッピングするマッピング変数です。特定のトークンに対して複数のデポジトリを登録できるようになっています。

**3. エラー:**
GMKRouterはいくつかのカスタムエラーを定義しており、異常な状態が発生した場合にリバートすることがあります。例えば、デポジトリが特定のトークンをサポートしていない場合や、登録されていないデポジトリをアンレジスターしようとした場合などです。

**4. 関数:**
- `registerDepository`: 特定のトークンに対してデポジトリを登録する関数です。オーナーのみが呼び出し可能です。デポジトリは複数のトークンに対して登録できますが、同じトークンに対して同じデポジトリを複数回登録することはできません。
- `unregisterDepository`: 登録されたデポジトリをアンレジスターする関数です。オーナーのみが呼び出し可能です。
- `findDepositoryForDeposit`および`findDepositoryForRedeem`: 特定のトークンに対するデポジトリを返す関数です。これらの関数は、現在の実装ではトークンに対して最初に登録されたデポジトリを返します。
- `depositoriesForAsset`: 特定のトークンに対して登録されたデポジトリのアドレス配列を返す関数です。

**5. プライベート関数:**
- `_firstDepositoryForAsset`: 特定のトークンに対して最初に登録されたデポジトリを返す内部関数です。
- `_checkDepositoriesForAsset`: 特定のトークンに対して指定したデポジトリが登録されているかをチェックする内部関数です。
- `_depositorySupportsAsset`: 特定のデポジトリが特定のトークンをサポートしているかをチェックする内部関数です。

GMKRouterはGMKControllerと連携しており、特定のトークンに対してデポジトリを登録し、デポジトリを使用してDEXとの相互作用を行うことができます。
